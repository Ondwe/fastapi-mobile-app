<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Humbu Imperial Intelligence | Business Brain</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Initialize live data updates
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'imperial-gold': '#FFD700',
                        'imperial-blue': '#0d1117',
                        'imperial-green': '#00FF88',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body { 
            background: radial-gradient(circle at top right, #0d1117 0%, #161b22 70%, #1c2128 100%); 
            color: #c9d1d9; 
            font-family: 'Inter', sans-serif;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }
        
        .glass { 
            background: rgba(255, 255, 255, 0.03); 
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.08); 
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }
        
        .glass:hover {
            border-color: rgba(255, 255, 255, 0.15);
            box-shadow: 0 12px 48px rgba(0, 0, 0, 0.4);
            transform: translateY(-2px);
        }
        
        .status-pulse { 
            animation: pulse 2s infinite; 
        }
        
        @keyframes pulse { 
            0% { opacity: 1; } 
            50% { opacity: 0.6; } 
            100% { opacity: 1; } 
        }
        
        .port-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); 
            gap: 12px; 
        }
        
        .glow-text {
            text-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
        }
        
        .imperial-badge {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }
        
        .live-data {
            font-family: 'JetBrains Mono', 'Cascadia Code', monospace;
        }
        
        /* Responsive design */
        @media (max-width: 768px) {
            .port-grid {
                grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            }
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #FFD700 0%, #00FF88 100%);
            border-radius: 4px;
        }
    </style>
</head>
<body class="p-4 md:p-8">
    <div class="max-w-7xl mx-auto">
        <!-- Header -->
        <header class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8 md:mb-10 pb-6 border-b border-gray-800">
            <div class="mb-4 md:mb-0">
                <h1 class="text-3xl md:text-4xl font-bold text-white tracking-tight glow-text">üèõÔ∏è HUMBU IMPERIAL NEXUS</h1>
                <p class="text-blue-400 font-mono text-sm md:text-base mt-1">CEO: Humbulani Mudau | Business Brain v2.0</p>
                <p class="text-gray-500 text-xs md:text-sm mt-2">17-Port Enterprise System | Predictive Intelligence Core</p>
            </div>
            <div class="text-right">
                <div class="text-xs uppercase tracking-widest text-gray-500 mb-1">LIVE PORTFOLIO VALUE</div>
                <div class="text-2xl md:text-3xl font-bold text-imperial-green" id="portfolioValue">R10,235,466.32</div>
                <div class="text-xs text-gray-400 mt-1 font-mono">Updated: <span id="updateTime">Just now</span></div>
            </div>
        </header>

        <!-- Main Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
            
            <!-- Repository Structure -->
            <div class="glass p-6 lg:col-span-1">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <span class="mr-2">üìÇ</span> Repository Structure
                    <span class="ml-auto text-xs bg-blue-900/30 text-blue-300 px-2 py-1 rounded-full">GitHub Synced</span>
                </h3>
                <div class="space-y-1 font-mono text-sm">
                    <div class="flex items-center text-blue-300 hover:text-blue-200 transition-colors">
                        <span>üìÅ</span>
                        <span class="ml-2">app/</span>
                        <span class="ml-auto text-xs text-gray-600">(Core Logic)</span>
                    </div>
                    <div class="flex items-center text-blue-300 hover:text-blue-200 transition-colors">
                        <span>üìÅ</span>
                        <span class="ml-2">alembic/</span>
                        <span class="ml-auto text-xs text-gray-600">(Migrations)</span>
                    </div>
                    <div class="flex items-center hover:text-white transition-colors">
                        <span class="text-green-500 mr-2">‚óè</span>
                        <span>main.py</span>
                        <span class="ml-auto text-xs text-gray-500">FastAPI Core</span>
                    </div>
                    <div class="flex items-center hover:text-white transition-colors">
                        <span class="text-green-500 mr-2">‚óè</span>
                        <span>ai_integration.py</span>
                        <span class="ml-auto text-xs text-gray-500">AI Models</span>
                    </div>
                    <div class="flex items-center hover:text-white transition-colors">
                        <span>üìÑ</span>
                        <span class="ml-2">Dockerfile</span>
                    </div>
                    <div class="flex items-center hover:text-white transition-colors">
                        <span>üìÑ</span>
                        <span class="ml-2">Procfile</span>
                        <span class="ml-auto text-xs text-gray-600">(Render Deploy)</span>
                    </div>
                    <div class="flex items-center hover:text-white transition-colors">
                        <span>üìÑ</span>
                        <span class="ml-2">requirements.txt</span>
                    </div>
                </div>
                <div class="mt-6 pt-4 border-t border-gray-800">
                    <a href="https://github.com/Ondwe/fastapi-mobile-app" target="_blank" 
                       class="inline-flex items-center text-sm text-blue-400 hover:text-blue-300 transition-colors">
                        <span class="mr-2">üîó</span>
                        <span>View on GitHub</span>
                        <span class="ml-1 text-xs">‚Üí</span>
                    </a>
                    <div class="text-xs text-gray-500 mt-2">Branch: <span class="text-gray-400">main</span> | Last Push: <span class="text-gray-400">Today</span></div>
                </div>
            </div>

            <!-- Business Brain API -->
            <div class="glass p-6 lg:col-span-1 border-t-2 border-imperial-green">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <span class="mr-2">üß†</span> Business Brain API
                    <span class="ml-auto">
                        <span class="text-xs bg-imperial-green/20 text-imperial-green px-2 py-1 rounded-full" id="apiStatus">HEALTHY</span>
                    </span>
                </h3>
                <div class="bg-black/40 p-4 rounded-lg mb-4 font-mono text-sm">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-gray-300">Health Check:</span>
                        <div class="flex items-center">
                            <span class="w-2 h-2 bg-green-500 rounded-full mr-2 status-pulse"></span>
                            <span class="text-green-400 font-bold" id="healthStatus">HEALTHY</span>
                        </div>
                    </div>
                    <div class="text-xs text-gray-500 font-mono" id="healthResponse">GET /health 200 OK</div>
                    <div class="mt-2 text-xs text-gray-400" id="timestamp">Timestamp: Loading...</div>
                </div>
                <div class="space-y-4">
                    <div>
                        <span class="text-xs block text-gray-500 mb-2 uppercase tracking-wider">AI INFRASTRUCTURE</span>
                        <div class="flex flex-wrap gap-2">
                            <span class="px-3 py-1 bg-blue-900/30 text-blue-300 text-xs rounded-full border border-blue-800/50">OLLAMA DEEPSEEK</span>
                            <span class="px-3 py-1 bg-purple-900/30 text-purple-300 text-xs rounded-full border border-purple-800/50">FASTAPI RENDER</span>
                            <span class="px-3 py-1 bg-green-900/30 text-green-300 text-xs rounded-full border border-green-800/50">17-PORT STACK</span>
                        </div>
                    </div>
                    <p class="text-sm text-gray-400 leading-relaxed">
                        The <span class="text-imperial-green font-semibold">Business Brain</span> acts as the central intelligence node, processing real-time USSD transactions, Aviation market surges, and council expansion data across the <span class="imperial-badge">17-port Imperial Stack</span>.
                    </p>
                </div>
            </div>

            <!-- System Vitals -->
            <div class="glass p-6 lg:col-span-1">
                <h3 class="text-lg font-semibold mb-4 flex items-center">
                    <span class="mr-2">üìä</span> System Vitals
                    <span class="ml-auto text-xs bg-green-900/30 text-green-300 px-2 py-1 rounded-full">17/17 Ports</span>
                </h3>
                <div class="space-y-6">
                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-sm text-gray-300">Uptime (30d)</span>
                            <span class="text-green-400 font-bold text-lg">100.0%</span>
                        </div>
                        <div class="w-full bg-gray-800 h-2.5 rounded-full overflow-hidden">
                            <div class="bg-gradient-to-r from-green-500 to-imperial-green h-full w-full rounded-full"></div>
                        </div>
                    </div>
                    
                    <div>
                        <span class="text-xs text-gray-500 uppercase tracking-wider block mb-3">Port Distribution</span>
                        <div class="port-grid">
                            <div class="bg-gradient-to-br from-green-900/30 to-green-800/10 text-green-400 text-xs p-3 rounded-lg text-center border border-green-800/30 hover:border-green-700/50 transition-all">
                                <div class="font-bold">8000</div>
                                <div class="text-[10px] text-gray-400 mt-1">API Core</div>
                            </div>
                            <div class="bg-gradient-to-br from-blue-900/30 to-blue-800/10 text-blue-400 text-xs p-3 rounded-lg text-center border border-blue-800/30 hover:border-blue-700/50 transition-all">
                                <div class="font-bold">11434</div>
                                <div class="text-[10px] text-gray-400 mt-1">AI Engine</div>
                            </div>
                            <div class="bg-gradient-to-br from-purple-900/30 to-purple-800/10 text-purple-400 text-xs p-3 rounded-lg text-center border border-purple-800/30 hover:border-purple-700/50 transition-all">
                                <div class="font-bold">8103</div>
                                <div class="text-[10px] text-gray-400 mt-1">Intel Alpha</div>
                            </div>
                            <div class="bg-gradient-to-br from-yellow-900/30 to-yellow-800/10 text-yellow-400 text-xs p-3 rounded-lg text-center border border-yellow-800/30 hover:border-yellow-700/50 transition-all">
                                <div class="font-bold">8082</div>
                                <div class="text-[10px] text-gray-400 mt-1">Dashboard</div>
                            </div>
                        </div>
                        <div class="text-center mt-3">
                            <a href="#" class="text-xs text-gray-500 hover:text-gray-400 transition-colors" onclick="showAllPorts()">View all 17 ports ‚Üí</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Imperial Stack Summary -->
        <div class="glass p-6 mb-8">
            <h3 class="text-lg font-semibold mb-4 flex items-center">
                <span class="mr-2">üèõÔ∏è</span> Imperial Stack Summary
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="p-4 bg-gradient-to-br from-gray-900/30 to-gray-800/10 rounded-lg border border-gray-800/30">
                    <div class="text-xs text-gray-500 uppercase tracking-wider mb-1">Financial Core</div>
                    <div class="text-lg font-bold text-white">R10.1M</div>
                    <div class="text-xs text-gray-400">Portfolio Backing</div>
                </div>
                <div class="p-4 bg-gradient-to-br from-green-900/30 to-green-800/10 rounded-lg border border-green-800/30">
                    <div class="text-xs text-gray-500 uppercase tracking-wider mb-1">Predictive Edge</div>
                    <div class="text-lg font-bold text-white">24h</div>
                    <div class="text-xs text-gray-400">Market Advantage</div>
                </div>
                <div class="p-4 bg-gradient-to-br from-blue-900/30 to-blue-800/10 rounded-lg border border-blue-800/30">
                    <div class="text-xs text-gray-500 uppercase tracking-wider mb-1">Council Scale</div>
                    <div class="text-lg font-bold text-white">352</div>
                    <div class="text-xs text-gray-400">Members by Feb 1</div>
                </div>
                <div class="p-4 bg-gradient-to-br from-purple-900/30 to-purple-800/10 rounded-lg border border-purple-800/30">
                    <div class="text-xs text-gray-500 uppercase tracking-wider mb-1">Deployment</div>
                    <div class="text-lg font-bold text-white">GitHub‚ÜíRender</div>
                    <div class="text-xs text-gray-400">CI/CD Pipeline</div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="text-center pt-6 border-t border-gray-800">
            <p class="text-xs text-gray-600 uppercase tracking-tighter mb-2">
                Imperial Nexus v2.0 | Deployment Status: <span class="text-green-400">üü¢ ACTIVE</span>
            </p>
            <p class="text-xs text-gray-500">
                CEO: <span class="text-gray-400">Humbulani Mudau</span> | 
                Contact: <span class="text-gray-400">079 465 8481</span> | 
                Response: <span class="text-green-400"><2 hours</span>
            </p>
            <div class="mt-4 flex justify-center space-x-4">
                <a href="https://github.com/Ondwe/fastapi-mobile-app" target="_blank" class="text-xs text-gray-500 hover:text-gray-400 transition-colors">GitHub</a>
                <a href="https://dashboard.render.com" target="_blank" class="text-xs text-gray-500 hover:text-gray-400 transition-colors">Render</a>
                <a href="http://55.115.193.47:8103/" target="_blank" class="text-xs text-gray-500 hover:text-gray-400 transition-colors">Market Intel</a>
                <a href="#" onclick="refreshData()" class="text-xs text-gray-500 hover:text-gray-400 transition-colors">‚ü≥ Refresh</a>
            </div>
        </footer>
    </div>

    <!-- JavaScript for live updates -->
    <script>
        // Format currency
        function formatCurrency(amount) {
            return 'R' + parseFloat(amount).toLocaleString('en-ZA', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            });
        }

        // Update timestamp
        function updateTimestamp() {
            const now = new Date();
            const options = { 
                year: 'numeric', 
                month: 'short', 
                day: 'numeric',
                hour: '2-digit', 
                minute: '2-digit',
                second: '2-digit',
                timeZone: 'Africa/Johannesburg'
            };
            document.getElementById('updateTime').textContent = now.toLocaleString('en-ZA', options);
        }

        // Fetch live health data
        async function fetchHealthData() {
            try {
                const response = await fetch('https://fastapi-mobile-app.onrender.com/health');
                if (response.ok) {
                    const data = await response.json();
                    
                    // Update health status
                    document.getElementById('healthStatus').textContent = data.status.toUpperCase();
                    document.getElementById('healthResponse').textContent = `GET /health ${response.status} ${response.statusText}`;
                    
                    // Format timestamp
                    const timestamp = new Date(data.timestamp);
                    const timeStr = timestamp.toLocaleTimeString('en-ZA', { 
                        hour: '2-digit', 
                        minute: '2-digit', 
                        second: '2-digit',
                        timeZone: 'UTC' 
                    });
                    document.getElementById('timestamp').textContent = `Timestamp: ${timeStr} UTC`;
                    
                    // Update API status badge
                    const apiStatusEl = document.getElementById('apiStatus');
                    if (data.status === 'healthy') {
                        apiStatusEl.textContent = 'HEALTHY';
                        apiStatusEl.className = 'text-xs bg-imperial-green/20 text-imperial-green px-2 py-1 rounded-full';
                    } else {
                        apiStatusEl.textContent = 'DEGRADED';
                        apiStatusEl.className = 'text-xs bg-yellow-900/20 text-yellow-400 px-2 py-1 rounded-full';
                    }
                }
            } catch (error) {
                document.getElementById('healthStatus').textContent = 'OFFLINE';
                document.getElementById('healthStatus').className = 'text-red-400 font-bold';
                document.getElementById('healthResponse').textContent = 'GET /health Failed';
                document.getElementById('apiStatus').textContent = 'OFFLINE';
                document.getElementById('apiStatus').className = 'text-xs bg-red-900/20 text-red-400 px-2 py-1 rounded-full';
            }
        }

        // Show all 17 ports modal
        function showAllPorts() {
            const ports = [
                { port: '8000', service: 'Business API (Render)', status: 'üü¢' },
                { port: '8082', service: 'Imperial Dashboard (UI)', status: 'üü¢' },
                { port: '8084', service: 'Enterprise Platform (API)', status: 'üü¢' },
                { port: '11434', service: 'Ollama AI (DeepSeek)', status: 'üü¢' },
                { port: '8888', service: 'System Node', status: 'üü¢' },
                { port: '1880', service: 'Node-RED (Automation)', status: 'üü¢' },
                { port: '8086', service: 'Apex Metrics (Werkzeug)', status: 'üü¢' },
                { port: '8087', service: 'USSD Seller Portal', status: 'üü¢' },
                { port: '8090', service: 'Real-time Monitor', status: 'üü¢' },
                { port: '8085', service: 'Legacy Vault', status: 'üü¢' },
                { port: '8095', service: 'Cloud File Manager', status: 'üü¢' },
                { port: '8080', service: 'Secondary Proxy', status: 'üü¢' },
                { port: '8083', service: 'Redundant Node', status: 'üü¢' },
                { port: '8103', service: 'Market Intel (Alpha)', status: 'üü¢' },
                { port: '8089', service: 'Market Intel (Files)', status: 'üü¢' },
                { port: '8102', service: 'Urban Gateway (Gauteng)', status: 'üü¢' },
                { port: '8099', service: 'B2B Scaling Hub', status: 'üü¢' }
            ];

            let html = '<div class="bg-black/90 fixed inset-0 z-50 flex items-center justify-center p-4">';
            html += '<div class="glass p-6 max-w-2xl w-full max-h-[80vh] overflow-y-auto">';
            html += '<div class="flex justify-between items-center mb-4">';
            html += '<h3 class="text-xl font-bold text-white">üèõÔ∏è 17-Port Imperial Stack</h3>';
            html += '<button onclick="closeModal()" class="text-gray-500 hover:text-white">‚úï</button>';
            html += '</div>';
            html += '<div class="grid grid-cols-1 md:grid-cols-2 gap-3">';
            
            ports.forEach(p => {
                html += `<div class="flex items-center justify-between p-3 bg-gray-900/50 rounded-lg border border-gray-800">
                    <div>
                        <div class="font-mono font-bold text-white">${p.port}</div>
                        <div class="text-xs text-gray-400">${p.service}</div>
                    </div>
                    <div class="text-xl">${p.status}</div>
                </div>`;
            });
            
            html += '</div>';
            html += '<div class="mt-6 pt-4 border-t border-gray-800 text-center">';
            html += '<p class="text-sm text-gray-400">All 17 ports operational ‚Ä¢ Uptime: 100% ‚Ä¢ Last verified: Just now</p>';
            html += '</div>';
            html += '</div>';
            html += '</div>';
            
            const modal = document.createElement('div');
            modal.innerHTML = html;
            modal.id = 'portsModal';
            document.body.appendChild(modal);
        }

        function closeModal() {
            const modal = document.getElementById('portsModal');
            if (modal) modal.remove();
        }

        // Refresh all data
        function refreshData() {
            updateTimestamp();
            fetchHealthData();
            // Add a visual refresh indicator
            const refreshBtn = document.querySelector('a[onclick="refreshData()"]');
            refreshBtn.innerHTML = '‚ü≥ Refreshing...';
            setTimeout(() => {
                refreshBtn.innerHTML = '‚ü≥ Refresh';
            }, 1000);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            updateTimestamp();
            fetchHealthData();
            
            // Auto-refresh every 30 seconds
            setInterval(fetchHealthData, 30000);
            setInterval(updateTimestamp, 1000);
            
            // Add keyboard shortcut
            document.addEventListener('keydown', (e) => {
                if (e.key === 'r' && (e.ctrlKey || e.metaKey)) {
                    e.preventDefault();
                    refreshData();
                }
                if (e.key === 'Escape') {
                    closeModal();
                }
            });
        });

        // Add service worker for offline capability
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js').catch(err => {
                    console.log('ServiceWorker registration failed:', err);
                });
            });
        }
    </script>
</body>
</html>
